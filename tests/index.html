<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>XmasMM - Mobile Test Suite</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      overflow-x: hidden;
    }
    
    .test-header {
      background: rgba(0,0,0,0.9);
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    
    .test-header h1 {
      margin: 0;
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .device-info {
      font-size: 12px;
      opacity: 0.8;
      margin-bottom: 15px;
    }
    
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .test-card {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      transition: transform 0.3s ease;
    }
    
    .test-card:hover {
      transform: translateY(-5px);
    }
    
    .test-card h3 {
      margin: 0 0 15px 0;
      font-size: 18px;
      color: #fff;
    }
    
    .test-button {
      display: block;
      width: 100%;
      padding: 12px;
      background: linear-gradient(45deg, #4CAF50, #45a049);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      text-align: center;
      font-weight: bold;
      margin-bottom: 10px;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
    }
    
    .test-button:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
    }
    
    .test-button.fullscreen {
      background: linear-gradient(45deg, #2196F3, #1976D2);
    }
    
    .test-button.responsive {
      background: linear-gradient(45deg, #FF9800, #F57C00);
    }
    
    .test-button.debug {
      background: linear-gradient(45deg, #9C27B0, #7B1FA2);
    }
    
    .test-description {
      font-size: 14px;
      opacity: 0.9;
      line-height: 1.4;
      margin-bottom: 15px;
    }
    
    .test-specs {
      font-size: 12px;
      opacity: 0.7;
      font-style: italic;
    }
    
    .current-viewport {
      background: rgba(255,255,255,0.1);
      padding: 10px;
      border-radius: 8px;
      margin-top: 15px;
      font-family: monospace;
      font-size: 11px;
    }
    
    @media (max-width: 768px) {
      .test-grid {
        grid-template-columns: 1fr;
        padding: 10px;
        gap: 15px;
      }
      
      .test-header h1 {
        font-size: 20px;
      }
      
      .test-card {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="test-header">
    <h1>üì± XmasMM Mobile Test Suite</h1>
    <div class="device-info" id="device-info">
      Loading device information...
    </div>
  </div>
  
  <div class="test-grid">
    
    <!-- Canvas Optimization Tests -->
    <div class="test-card">
      <h3>üéØ Canvas Size Optimization</h3>
      <div class="test-description">
        Tests the critical canvas sizing fixes for mobile portrait mode. Should use 90%+ of screen height instead of small 4:3 rectangle.
      </div>
      <a href="test_canvas_optimization.html" class="test-button fullscreen">
        üìê Canvas Size Test
      </a>
      <div class="test-specs">
        ‚Ä¢ Before: ~43% screen usage<br>
        ‚Ä¢ After: ~95% screen usage<br>
        ‚Ä¢ Target: iPhone SE to Pro Max
      </div>
    </div>
      <!-- Expert Mobile Optimization -->
    <div class="test-card">
      <h3>ÔøΩ Expert Mobile Layout</h3>
      <div class="test-description">
        <strong>NEW!</strong> Professional mobile optimization with dynamic viewport detection, safe area handling, and performance monitoring.
      </div>
      <a href="test_mobile_expert.html" class="test-button responsive">
        ÔøΩ Expert Mobile Test
      </a>
      <div class="test-specs">
        ‚Ä¢ Real-time FPS monitoring<br>
        ‚Ä¢ Device simulation (SE/XR/Pro Max)<br>
        ‚Ä¢ Safe area detection & validation<br>
        ‚Ä¢ Touch target accessibility testing<br>
        ‚Ä¢ Responsive typography validation
      </div>
    </div>

    <!-- Touch & Interaction Tests -->
    <div class="test-card">
      <h3>ÔøΩ Debug & Performance</h3>
      <div class="test-description">
        Debug view with real-time metrics, console monitoring, and performance analysis for mobile devices.
      </div>
      <a href="test_debug_performance.html" class="test-button debug">
        üêõ Debug Test
      </a>
      <div class="test-specs">
        ‚Ä¢ Real-time canvas metrics<br>
        ‚Ä¢ Console error monitoring<br>
        ‚Ä¢ Touch event logging
      </div>
    </div>

    <!-- Canvas Optimization -->
    <div class="test-card">
      <h3>üéÆ Canvas Optimization</h3>
      <div class="test-description">
        Canvas rendering optimization validation with viewport utilization and performance testing.
      </div>
      <a href="test_canvas_optimization.html" class="test-button">
        üñºÔ∏è Canvas Test
      </a>
      <div class="test-specs">
        ‚Ä¢ Full viewport utilization (100vw√ó100vh)<br>
        ‚Ä¢ Canvas scaling optimization<br>
        ‚Ä¢ Rendering performance metrics
      </div>
    </div>
      <a href="test_debug_performance.html" class="test-button debug">
        üêõ Debug Test
      </a>
      <div class="test-specs">
        ‚Ä¢ Real-time canvas metrics<br>
        ‚Ä¢ Console error monitoring<br>
        ‚Ä¢ Touch event logging
      </div>
    </div>
      <!-- Asset Loading Tests -->
    <div class="test-card">
      <h3>üé® Asset Loading</h3>
      <div class="test-description">
        Tests Christmas element image loading and device pixel ratio handling for optimal visual quality.
      </div>
      <a href="test_asset_loading.html" class="test-button">
        üñºÔ∏è Asset Test
      </a>
      <div class="test-specs">
        ‚Ä¢ 1x/2x/3x image resolution<br>
        ‚Ä¢ Device pixel ratio detection<br>
        ‚Ä¢ Asset loading validation
      </div>
    </div>

    <!-- Comprehensive Refactoring Test -->
    <div class="test-card">
      <h3>üîß Comprehensive Integration Test</h3>
      <div class="test-description">
        Complete validation of the refactored modular architecture. Tests all manager classes and their integration.
      </div>
      <a href="test_comprehensive.html" class="test-button">
        üß™ Integration Test
      </a>
      <div class="test-specs">
        ‚Ä¢ Module loading validation<br>
        ‚Ä¢ Manager integration testing<br>
        ‚Ä¢ Full game functionality check
      </div>
    </div>
    
    <!-- Full Game Experience -->
    <div class="test-card">
      <h3>üéÑ Full Game Experience</h3>
      <div class="test-description">
        Complete game test with all mobile optimizations applied. The real mobile experience test.
      </div>
      <a href="../index.html" class="test-button">
        üéÆ Play Full Game
      </a>
      <div class="test-specs">
        ‚Ä¢ Production-ready experience<br>
        ‚Ä¢ All mobile fixes applied<br>
        ‚Ä¢ Family-friendly UX included
      </div>
    </div>
    
  </div>
  
  <div class="current-viewport" id="viewport-details">
    <!-- Real-time viewport info will be displayed here -->
  </div>
  
  <script>
    function updateDeviceInfo() {
      const deviceInfo = document.getElementById('device-info');
      const viewportDetails = document.getElementById('viewport-details');
      
      const viewport = {
        width: window.innerWidth,
        height: window.innerHeight,
        dpr: window.devicePixelRatio || 1,
        orientation: window.innerHeight > window.innerWidth ? 'Portrait' : 'Landscape'
      };
      
      // Detect likely device type
      let deviceType = 'Desktop';
      if (viewport.width <= 428 && 'ontouchstart' in window) {
        if (viewport.width <= 375) deviceType = 'iPhone SE/Mini';
        else if (viewport.width <= 390) deviceType = 'iPhone Standard';
        else deviceType = 'iPhone Pro Max';
      }
      
      deviceInfo.innerHTML = `
        ${deviceType} ‚Ä¢ ${viewport.width}√ó${viewport.height} ‚Ä¢ ${viewport.orientation} ‚Ä¢ ${viewport.dpr}x DPR
      `;
      
      // Calculate expected canvas size
      const availableHeight = viewport.height * 0.95;
      const availableWidth = viewport.width * 0.98;
      
      let canvasWidth, canvasHeight;
      if (viewport.width < 500) {
        canvasWidth = Math.min(availableWidth, viewport.width);
        canvasHeight = Math.min(availableHeight, viewport.height);
      } else {
        const aspectRatio = 4 / 3;
        if (availableWidth / availableHeight > aspectRatio) {
          canvasHeight = Math.min(availableHeight, 600);
          canvasWidth = canvasHeight * aspectRatio;
        } else {
          canvasWidth = Math.min(availableWidth, 800);
          canvasHeight = canvasWidth / aspectRatio;
        }
      }
      
      const screenUsage = Math.round((canvasHeight / viewport.height) * 100);
      
      viewportDetails.innerHTML = `
        <strong>Current Viewport Analysis:</strong><br>
        Screen: ${viewport.width}√ó${viewport.height} (${viewport.orientation})<br>
        Expected Canvas: ${Math.floor(canvasWidth)}√ó${Math.floor(canvasHeight)}<br>
        Screen Usage: ${screenUsage}% height<br>
        Device Type: ${deviceType}<br>
        Touch Support: ${'ontouchstart' in window ? 'Yes' : 'No'}
      `;
    }
    
    // Update device info on load and resize
    updateDeviceInfo();
    window.addEventListener('resize', updateDeviceInfo);
    window.addEventListener('orientationchange', () => {
      setTimeout(updateDeviceInfo, 100);
    });
  </script>
</body>
</html>
